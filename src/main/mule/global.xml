<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:salesforce="http://www.mulesoft.org/schema/mule/salesforce" xmlns:apikit="http://www.mulesoft.org/schema/mule/mule-apikit"
	xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/mule-apikit http://www.mulesoft.org/schema/mule/mule-apikit/current/mule-apikit.xsd
http://www.mulesoft.org/schema/mule/salesforce http://www.mulesoft.org/schema/mule/salesforce/current/mule-salesforce.xsd">
	<http:listener-config name="Global_HTTP_Listener_config" doc:name="HTTP Listener config" doc:id="881ed94f-9538-4120-8868-03e915d389f5" basePath="${api.config.basepath}">
		<http:listener-connection host="0.0.0.0" port="${api.config.port}" />
	</http:listener-config>
	<apikit:config outboundHeadersMapName="outboundHeadersMapName" httpStatusVarName="httpStatus" doc:name="Router" doc:id="bf26166b-4d3a-42d2-8c9b-5ddeb3b9862d" name="REST_API_Router" api="api/rest-api.raml" >
		<apikit:flow-mappings >
			<apikit:flow-mapping resource="/token/rest" action="get" flow-ref="authentication-rest-flow" />
			<apikit:flow-mapping resource="/token/soap" action="get" flow-ref="authentication-soap-flow" />
			<apikit:flow-mapping resource="/account" action="post" flow-ref="rest-account-insert-flow" />
			<apikit:flow-mapping resource="/account" action="get" flow-ref="rest-account-list-flow" />
			<apikit:flow-mapping resource="/account/batch" action="post" content-type="application/json" flow-ref="rest-account-batch-insert-flow" />
			<apikit:flow-mapping resource="/account/{id}" action="get" flow-ref="rest-account-by-id-flow" />
		</apikit:flow-mappings>
	</apikit:config>
	<apikit:config outboundHeadersMapName="outboundHeadersMapName" httpStatusVarName="httpStatus" doc:name="Router" doc:id="e3940dad-747e-4eac-a561-64e1a34bdbbd" name="Components_API_Router" api="api/components-api.raml" >
		<apikit:flow-mappings >
			<apikit:flow-mapping resource="/user-info" action="get" flow-ref="component-user-info-flow" />
			<apikit:flow-mapping resource="/account" action="post" content-type="application/json" flow-ref="component-account-insert-flow" />
			<apikit:flow-mapping resource="/account" action="get" flow-ref="component-account-query-flow" />
      <apikit:flow-mapping resource="/account/batch" action="post" content-type="application/json" flow-ref="component-account-batch-flow" />
      <apikit:flow-mapping resource="/account/{id}" action="get" flow-ref="component-account-get-by-id-apex-flow" />
		</apikit:flow-mappings>
	</apikit:config>
	<global-property doc:name="Global Property" doc:id="d4ec8d49-a61f-44ba-bde0-4fbbbc902bad" name="mule.env" value="Local" />
	<configuration-properties doc:name="Configuration properties" doc:id="3c6bbcf0-e9af-46b9-9980-fe5f24aa119f" file="${mule.env}.properties" />
	<http:request-config name="SFDC_Auth_Request_Config" doc:name="HTTP Request configuration" doc:id="120b178e-bccb-419f-85c2-1c502ece5eb9" >
		<http:request-connection protocol="HTTPS" host="${sfdc.auth.host}" port="443" />
	</http:request-config>
	<http:request-config name="SFDC_Endpoint_Request_Config" doc:name="HTTP Request configuration" doc:id="b5ba4836-b44c-4dff-bc7f-813783f5d135" >
		<http:request-connection protocol="HTTPS" host="${sfdc.endpoint.host}" port="443" />
	</http:request-config>
	<salesforce:sfdc-config name="Salesforce_Config" doc:name="Salesforce Config" doc:id="76539f84-21cc-471f-a4be-39bcda896ae3" >
		<salesforce:oauth-user-pass-connection consumerKey="${sfdc.auth.client_id}" consumerSecret="${sfdc.auth.client_secret}" username="${sfdc.auth.username}" password="${sfdc.auth.password}" securityToken="${sfdc.auth.security_token}" />
	</salesforce:sfdc-config>
</mule>
